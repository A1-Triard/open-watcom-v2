proj_name = conv

conv_autodepends = .AUTODEPEND
conv_distrib_lib = 1

additional_cleanup = *.asm *.c *.inc

!include cproj.mif
!include deftarg.mif
!include defrule.mif

.EXTENSIONS: .def

.def : ../def
.asm : ../asm
.c : ../c
.h : ../h

def_files = &
clib.def &
commdlg.def &
ddeml.def &
dpmi.def &
lzexpand.def &
mmsystem.def &
odbc.def &
ole.def &
penwin.def &
shell.def &
stress.def &
toolhelp.def &
ver.def &
win31.def &
win31_16.def &

extra_a_flags_fldenv = -i"$(watcom_dir)/h"

all : ./conv.exe win386.lib

./conv.exe : conv.c makefile
    $(bld_cl) $(bld_cl_opts) $[@ $(bld_ldflags)

win386.lib : ./conv.exe $(def_files) ../def/win386 fldenv.obj _call16.obj
    $[@ ../def/win386 ../def -l -s -q
    $(librarian) $(libflags) +fldenv.obj +_call16.obj @winobjs.lst
