parameters:
  arch:     ''
  title:    ''
  owimage:  ''
  owtools:  ''
  owscript: ''

jobs:
  - job: testboot${{ parameters.arch }}
    displayName: "${{ parameters.title }}"
    variables:
      ${{ if eq(parameters.arch, 'lnx') }}:
        watcom:       $(owroot)/rel
        include:      $(watcom)/lh
        watcom.path:  $(watcom)/binl
      ${{ if eq(parameters.arch, 'nt') }}:
        watcom:       $(owroot)\rel
        include:      $(watcom)\h;$(watcom)\h\nt
        watcom.path:  $(watcom)\binnt
    pool:
      vmImage: ${{ parameters.owimage }}
    steps:
    - template: artfload.yml
      parameters:
        path:       rel
        artifname:  rel-${{ parameters.arch }}
    - script: ${{ parameters.owscript }}
      displayName: "Test Bootstrap OW"
      env:
        owbuild_stage:  boot
        owimage:    ${{ parameters.owimage }}
        owtools:    ${{ parameters.owtools }}
