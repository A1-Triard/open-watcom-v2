parameters:
  arch:     ''
  title:    ''
  image:    ''
  tools:    ''
  pscript:  ''

jobs:
  - job: boot${{ parameters.arch }}
    displayName: "${{ parameters.title }}"
    variables:
      owbuild.stage: boot
      owimage:  ${{ parameters.image }}
      owtools:  ${{ parameters.tools }}
    pool:
      vmImage: ${{ parameters.image }}
    steps:
    - script: ${{ parameters.pscript }}
      displayName:  "Bootstrap"
    - template: artfsave.yml
      parameters:
        path:       build/$(owobjdir)
        artifname:  build-${{ parameters.arch }}
    - template: artfsave.yml
      parameters:
        path:       bld/watcom/$(owobjdir)
        artifname:  bld-watcom-${{ parameters.arch }}
